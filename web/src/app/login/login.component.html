<!-- 背景影片 -->
<video autoplay muted loop id="backgroundVideo"
oncanplay="this.play()"
onloadedmetadata="this.muted = true"
aria-hidden="true"
>
  <source src="assets/video.mp4" type="video/mp4" />
</video>

<main class="container-fluid min-vh-100">
  <div class="row justify-content-center align-items-center vh-100 p-4">
    <article class="card p-4" style="max-width: 880px;">
      <div class="card-body">
        <!-- 分成左右2個區塊, 左邊區塊在小畫面時不顯示 -->
        <div class="row p-2 align-items-center" style="min-height: 500px;">
          <!-- 左側介紹區 -->
          <aside class="col-lg-6 d-none d-lg-block">
            <figure class="text-center m-4">
              <img src="{{logourl}}" alt="帆宣系統科技 Logo" width="200" />
            </figure>
            <p class="card-text">歡迎使用帆宣專案管理系統。</p>
            <p class="card-text">
              您可以使用系統查看或建立專案。
              管理專案人才、表單、照片、進度、會議等資料。
            </p>
            <p>
              無論在工地或辦公室, 手機或平板, 都可以隨時隨地查看專案資料。
            </p>
            <hr>
            <figure class="text-center">
              <qrcode [qrdata]="currentSiteUrl" [width]="80" [errorCorrectionLevel]="'M'" title="登入網址 QR Code"></qrcode>
              <figcaption class="visually-hidden">掃描此 QR Code 可進入登入頁面</figcaption>
            </figure>
          </aside>

          <!-- 右側登入表單區 -->
          <section class="col-lg-6 d-flex flex-column align-items-center">
            <img src="{{logourl}}" class="d-block d-lg-none" alt="帆宣系統科技 Logo" width="120" />
            <h1 class="card-title text-center my-4 h4">帆宣專案管理系統</h1>
            <form class="my-4 w-100" (ngSubmit)="submit()">
              <fieldset>
                <legend class="visually-hidden">登入資訊</legend>
                <div class="mb-2">
                  <label for="username" class="form-label">帳號</label>
                  <input
                    type="text"
                    class="form-control"
                    id="username"
                    name="username"
                    [(ngModel)]="username"
                    placeholder="Enter username"
                    autocomplete="username"
                    required
                  />
                </div>
                <div class="mb-2">
                  <label for="password" class="form-label">密碼</label>
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    name="password"
                    [(ngModel)]="password"
                    placeholder="Enter password"
                    autocomplete="current-password"
                    required
                  />
                </div>
                <div class="text-center my-4">
                  <button
                    type="submit"
                    class="btn btn-primary btn-block w-100"
                    [disabled]="isLoading"
                  >
                    @if (isLoading) {
                    <span
                      class="spinner-border spinner-border-sm"
                      role="status"
                      aria-hidden="true"
                    ></span>
                    <span class="visually-hidden">載入中...</span>
                    } 登入
                  </button>
                </div>
              </fieldset>

              <hr />

              <!-- SSO 登入選項 -->
              <section class="text-center my-4" aria-label="其他登入方式">
                @if (adSso) {
                <button
                  type="button"
                  class="btn btn-primary btn-block w-100"
                  [disabled]="isLoading"
                  (click)="sso()"
                >
                  按這裡使用 SSO 帳號登入
                </button>
                }
                @if (googleSso) {
                <a
                  href="{{ googleSsoUrl }}"
                  class="btn btn-primary btn-block w-100 mt-4"
                  role="button"
                  >使用Google帳號登入</a>
                }
              </section>
            </form>
          </section>
        </div>
      </div>
    </article>
  </div>
</main>

<footer class="position-absolute bottom-0 end-0 p-2">
  <small>{{ buildVersion }}</small>
</footer>
