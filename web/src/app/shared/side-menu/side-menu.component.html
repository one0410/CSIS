<div
  id="menuDiv"
  class="bg-white h-100"
  style="width: 250px; min-width: 250px; overflow-y: auto;"
>
  <div class="p-3">
    <!-- 右上角關閉按鈕 -->
    <button
      class="btn btn-sm btn-outline-secondary float-end d-lg-none"
      (click)="closeMenu()"
      title="關閉選單"
    >
      <i class="fas fa-times"></i>
    </button>
    <!-- 選單標題 -->
    <h5>選單</h5>

    <!-- 可收合的選單項目 -->
    <div class="accordion accordion-flush" id="mainMenu">

      <!-- 我的工地 -->
      <div class="accordion-item border-0">
        <button class="accordion-button p-2" type="button" data-bs-target="#site-collapse">
          <i class="fas fa-building me-2"></i>我的專案({{currentSite()?.projectName}})
        </button>
        <div id="site-collapse" class="accordion-collapse collapse show">
          <div class="accordion-body p-0">
            <div class="d-flex flex-column ps-4">
              <!-- 工地詳情選單 -->
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'overview']" routerLinkActive="active" (click)="onNavLinkClick()">專案基本資料</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'bulletin']" routerLinkActive="active" (click)="onNavLinkClick()">公佈欄</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'dashboard']" routerLinkActive="active" (click)="onNavLinkClick()">Dashboard</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'schedule']" routerLinkActive="active" (click)="onNavLinkClick()">進度表</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'new-schedule']" routerLinkActive="active" (click)="onNavLinkClick()">新進度表</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'photos']" routerLinkActive="active" (click)="onNavLinkClick()">相片</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'hazardNotice']" routerLinkActive="active" (click)="onNavLinkClick()">危害告知</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'training']" routerLinkActive="active" (click)="onNavLinkClick()">教育訓練</a>
              <a class="nav-link py-2 d-flex justify-content-between align-items-center" [routerLink]="['/site', siteId, 'equipment']" routerLinkActive="active" (click)="onNavLinkClick()">
                <span>機具管理</span>
                @if (disqualifiedEquipmentCount() > 0) {
                  <span class="badge bg-danger">{{ disqualifiedEquipmentCount() }}</span>
                }
              </a>
              <a class="nav-link py-2 d-flex justify-content-between align-items-center" [routerLink]="['/site', siteId, 'forms']" routerLinkActive="active" (click)="onNavLinkClick()">
                <span>工地表單</span>
                @if (pendingFormsCount() > 0) {
                  <span class="badge bg-warning text-dark">{{ pendingFormsCount() }}</span>
                }
              </a>
              <!-- <a class="nav-link py-2" [routerLink]="['/site', siteId, 'blankForms']" routerLinkActive="active">空白表單</a> -->
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'userList']" routerLinkActive="active" (click)="onNavLinkClick()">使用者</a>
              <a class="nav-link py-2 d-flex justify-content-between align-items-center" [routerLink]="['/site', siteId, 'workerList']" routerLinkActive="active" (click)="onNavLinkClick()">
                <span>人才列表</span>
                @if (workersWithoutHazardNoticeCount() > 0) {
                  <span class="badge bg-danger">{{ workersWithoutHazardNoticeCount() }}</span>
                }
              </a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'visitorList']" routerLinkActive="active" (click)="onNavLinkClick()">訪客列表</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'accidentList']" routerLinkActive="active" (click)="onNavLinkClick()">工安事件(故)</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'daily-report']" routerLinkActive="active" (click)="onNavLinkClick()">日報表</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'weekly-report']" routerLinkActive="active" (click)="onNavLinkClick()">週報表</a>
              <a class="nav-link py-2" [routerLink]="['/site', siteId, 'monthly-report']" routerLinkActive="active" (click)="onNavLinkClick()">月報表</a>
              <!-- <a
                href="#"
                class="nav-link py-2"
                [routerLinkActive]="['active']"
                >年報表</a
              > -->
            </div>
          </div>
        </div>
      </div>

      <!-- 報表查詢 -->
      <!-- <div class="accordion-item border-0">
        <button class="accordion-button p-2" type="button" data-bs-target="#report-collapse">
          <i class="fas fa-file-alt me-2"></i>報表查詢
        </button>
        <div id="report-collapse" class="accordion-collapse collapse show">
          <div class="accordion-body p-0">
            <div class="d-flex flex-column ps-4">
              <a
                href="#"
                class="nav-link py-2"
                [routerLinkActive]="['active']"
                >日報表</a
              >
              <a
                href="#"
                class="nav-link py-2"
                [routerLinkActive]="['active']"
                >月報表</a
              >
              <a
                href="#"
                class="nav-link py-2"
                [routerLinkActive]="['active']"
                >年報表</a
              >
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
</div>
